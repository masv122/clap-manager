(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{d5fc:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{"style-fn":e.myTweak,padding:""}},[a("div",[e.$q.screen.lt.sm?e._e():a("NavSectores"),a("ModificarSector"),a("DetallesSector"),a("TablaSectores")],1),a("FBA")],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pt-md q-mx-md"},[a("div",{staticClass:"fit row justify-end"},[a("div",{staticClass:"col-auto q-gutter-xs"},[a("q-btn",{attrs:{color:"positive",flat:"",icon:"add",label:"Agregar"},on:{click:e.updateAgregar}}),a("q-btn",{attrs:{color:"primary",flat:"",icon:"print",label:"Imprimir"}})],1)])])},i=[],c=a("ded3"),l=a.n(c),n=a("2f62"),d={name:"NavSectores",computed:{},methods:l()({},Object(n["d"])("sectores",["updateAgregar"]))},u=d,m=a("2877"),p=a("9c40"),f=a("eebe"),b=a.n(f),q=Object(m["a"])(u,r,i,!1,null,"3ed73da1",null),v=q.exports;b()(q,"components",{QBtn:p["a"]});var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"","full-height":e.$q.screen.lt.sm,"full-width":e.$q.screen.lt.sm},on:{show:e.cargarData},model:{value:e._detallesSector,callback:function(t){e._detallesSector=t},expression:"_detallesSector"}},[a("q-card",{staticClass:"bg-white text-dark",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-toolbar",{staticClass:"bg-negative text-white q-mb-md",attrs:{dark:""}},[a("q-toolbar-title",{attrs:{shrink:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"article"}}),e._v("Detalles Sector\n          ")],1)]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-dark text-white"}},[e._v("Cerrar")])],1)],1),a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"column"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"info"}}),e._v("Datos del sector\n            ")],1),e.sector?a("informacion-sector",{attrs:{nombre:e.sector.nombre,estado:e.sector.estado,municipio:e.sector.municipio,parroquia:e.sector.parroquia}}):e._e()],1),a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"supervised_user_circle"}}),e._v("Jefe de calle\n            ")],1),e.sector?a("informacion-jefe",{attrs:{nombre:e.sector.jefe?e.buscarJefe(e.sector.jefe).nombre:"sin jefe de calle asignado",cedula:e.sector.jefe?e.buscarJefe(e.sector.jefe).cedula:null,codigo:e.sector.jefe?e.buscarJefe(e.sector.jefe).codigo:"sin jefe de calle asignado"}}):e._e()],1),e.sector?a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"supervised_user_circle"}}),e._v("Informacion detallada\n            ")],1),a("q-field",{attrs:{borderless:"",label:"Nucleos registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.sector.nucleos.length))])]},proxy:!0}],null,!1,555170654)}),a("q-field",{attrs:{borderless:"",label:"Integrantes registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.integrantes.length))])]},proxy:!0}],null,!1,2484573839)}),a("q-field",{attrs:{borderless:"",label:"Pagos registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Pagos registrados")])]},proxy:!0}],null,!1,3374237537)})],1):e._e()])])],1)],1)],1)},g=[],_=a("c973"),S=a.n(_),C=a("4bcc"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-field",{attrs:{borderless:"",label:"Nombre","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.nombre))])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Cedula","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.cedula))])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Codigo","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.codigo))])]},proxy:!0}])})],1)},y=[],w={name:"InformacionJefe",props:{nombre:{type:String,default:""},cedula:{type:Number,default:null},codigo:{type:String,default:""}}},x=w,j=a("8572"),Q=Object(m["a"])(x,k,y,!1,null,"f3fd0594",null),M=Q.exports;b()(Q,"components",{QField:j["a"]});var J={name:"DetallesSector",components:{InformacionSector:C["a"],InformacionJefe:M},data(){return{integrantes:[],pagos:[]}},computed:l()(l()(l()({},Object(n["c"])("sectores",["detalles","sector"])),Object(n["c"])("personas",["buscarJefe"])),{},{_detallesSector:{get(){return this.detalles},set(e){this.updateDetalles(e)}}}),methods:l()(l()({},Object(n["d"])("sectores",["updateDetalles"])),{},{cargarData(){var e=this;return S()((function*(){e.integrantes=yield e.sector.getIntegrantes()}))()}})},N=J,O=a("24e8"),D=a("f09f"),T=a("65c6"),I=a("6ac5"),E=a("0016"),$=a("05c0"),P=a("a370"),B=a("7f67"),A=Object(m["a"])(N,h,g,!1,null,"a216c132",null),F=A.exports;b()(A,"components",{QDialog:O["a"],QCard:D["a"],QToolbar:T["a"],QToolbarTitle:I["a"],QIcon:E["a"],QBtn:p["a"],QTooltip:$["a"],QCardSection:P["a"],QField:j["a"]}),b()(A,"directives",{ClosePopup:B["a"]});var R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"q-mt-md",attrs:{grid:e.$q.screen.xs,"visible-columns":e.visibleColumns,title:"Sectores",data:e.sectores,columns:e.columns,"row-key":"id",filter:e.filter,loading:e.cargandoSectores,"no-data-label":"Sin registro de sectores"},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"negative"}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-select",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"},attrs:{multiple:"","label-color":"negative",color:"negative",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":""},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(o){return a("q-th",{key:o.name,attrs:{props:t}},[e._v(e._s(o.label))])})),a("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(o){return a("q-td",{key:o.name,attrs:{props:t}},[e._v(e._s(o.value))])})),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"},on:{click:function(a){return e.updateSector(t.row)}}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateDetalles}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"article",color:"info"}})],1),a("q-item-section",[e._v("Detalles")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateModificar}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"edit",color:"amber"}})],1),a("q-item-section",[e._v("Modificar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.confirmacion}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"delete",color:"negative"}})],1),a("q-item-section",[e._v("Eliminar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"print",color:"primary"}})],1),a("q-item-section",[e._v("Imprimir")])],1)],1)],1)],1)],1)],2)]}},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:t.selected?"transform: scale(0.95);":""},[a("q-card",[a("q-card-section",[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_horiz"},on:{click:function(a){return e.updateSector(t.row)}}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateDetalles}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"article",color:"info"}})],1),a("q-item-section",[e._v("Detalles")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateModificar}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"edit",color:"amber"}})],1),a("q-item-section",[e._v("Modificar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.confirmacion}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"delete",color:"negative"}})],1),a("q-item-section",[e._v("Eliminar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"print",color:"primary"}})],1),a("q-item-section",[e._v("Imprimir")])],1)],1)],1)],1)],1),a("q-separator"),a("q-list",{attrs:{dense:""}},e._l(t.cols.filter((function(e){return"desc"!==e.name})),(function(t){return a("q-item",{key:t.name},[a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.value))])],1)],1)})),1)],1)],1)]}}])})},G=[],L=a("08e6"),z={name:"TablaSectores",data(){return{filter:"",visibleColumns:["nombre","estado","municipio","parroquia","jefe"],columns:[{name:"nombre",label:"Nombre",field:"nombre"},{name:"estado",label:"Estado",field:"estado"},{name:"municipio",label:"Municipio",field:"municipio"},{name:"parroquia",label:"Parroquia",field:"parroquia"},{name:"jefe",label:"Jefe de Calle",field:e=>e.jefe?this.buscarJefe(e.jefe).nombreCompleto():"Sin jefe de calle asingado"},{name:"id",label:"Identificador",field:"id"},,{name:"nucleos",label:"nucleos",field:e=>{const t=[];return e.nucleos.forEach(e=>{const a=this.buscarNucleo(e);t.push(a.nombre)}),t}}]}},methods:l()(l()({},Object(n["d"])("sectores",["updateSector","updateDetalles","updateModificar"])),{},{confirmacion(){var e=this;this.$q.dialog({title:"Confirme",message:this.sector.nucleos?"El sector posee nucleos e integrantes registrados.\n Si lo elimina tambien se eliminaran los mismos.\n ¿Seguro que quiere eliminar este sector?":"¿Seguro que quiere eliminar este sector?",cancel:!0,persistent:!0}).onOk(S()((function*(){try{if(e.sector.nucleos){const t=yield e.sector.getRegistrosAsociados();yield L["j"](t.integrantes),yield L["p"](t.nucleos)}e.sector.jefe&&(yield L["t"](yield e.sector.getJefe())),yield L["s"](e.sector)}catch(t){alert("error al eliminar el sector 101: "+t)}})))}}),computed:l()(l()({},Object(n["c"])("sectores",["sectores","sector","cargandoSectores"])),Object(n["c"])("personas",["buscarJefe","buscarNucleo"]))},H=z,K=a("eaac"),U=a("74f7"),V=a("ddd8"),W=a("27f9"),X=a("bd08"),Y=a("357e"),Z=a("db86"),ee=a("4e73"),te=a("1c1c"),ae=a("66e5"),oe=a("4074"),se=a("eb85"),re=a("0170"),ie=Object(m["a"])(H,R,G,!1,null,null,null),ce=ie.exports;b()(ie,"components",{QTable:K["a"],QInnerLoading:U["a"],QSelect:V["a"],QInput:W["a"],QIcon:E["a"],QTr:X["a"],QTh:Y["a"],QTd:Z["a"],QBtn:p["a"],QMenu:ee["a"],QList:te["a"],QItem:ae["a"],QItemSection:oe["a"],QCard:D["a"],QCardSection:P["a"],QSeparator:se["a"],QItemLabel:re["a"]}),b()(ie,"directives",{ClosePopup:B["a"]});var le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"","full-height":e.$q.screen.lt.sm,"full-width":e.$q.screen.lt.sm},on:{show:e.cargarSector,hide:e.resetear},model:{value:e._modificarSector,callback:function(t){e._modificarSector=t},expression:"_modificarSector"}},[a("q-card",{staticClass:"bg-white text-dark",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-toolbar",{staticClass:"bg-negative text-white q-mb-md",attrs:{dark:""}},[a("q-toolbar-title",{attrs:{shrink:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"edit"}}),e._v("Modificar Sector\n          ")],1)]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-dark text-white"}},[e._v("Cerrar")])],1)],1),a("q-card-section",{staticClass:"q-ma-md"},[a("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"text-h6 q-mt-md"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"info"}}),e._v("Datos del sector\n            "),a("q-btn",{staticClass:"float-right",attrs:{color:"negative",icon:"redo",label:"Restablecer"},on:{click:e.cargarSector}})],1),a("q-separator"),a("DatosBasicosSector",{attrs:{modificar:""}}),a("div",{staticClass:"text-h6 q-mt-md"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"supervised_user_circle"}}),e._v("Reasignar jefe de calle\n            "),a("q-btn",{staticClass:"float-right",attrs:{color:"negative",icon:"redo",label:"Restablecer"}})],1),a("q-separator"),a("TablaJefesDeCalleGrid")],1)],1),a("q-separator"),a("q-card-actions",{staticClass:"q-ma-md",attrs:{align:"center"}},[a("q-btn",{staticClass:"q-ml-sm full-width",attrs:{label:"Guardar",icon:"save",type:"submit",color:"primary"},on:{click:e.confirmacion}})],1)],1)],1)],1)},ne=[],de=a("cbbd"),ue=a("29cd"),me=a("07bd"),pe={name:"ModificarSector",components:{TablaJefesDeCalleGrid:ue["a"],DatosBasicosSector:me["a"]},data(){return{idJefe:""}},computed:l()(l()(l()(l()({},Object(n["c"])("sectores",["modificar","sector","estadoMod","municipioMod","parroquiaMod","nombreMod"])),Object(n["c"])("personas",["jefeSector","buscarJefe"])),Object(n["c"])("global",["estados","municipios","parroquias","municipiosEnEstado","parroquiasEnMunicipio","estadoPorNombre","municipioPorNombre","parroquiasPorNombre"])),{},{_modificarSector:{get(){return this.modificar},set(){this.updateModificar()}}}),methods:l()(l()(l()({},Object(n["d"])("sectores",["updateModificar","updateSector","updateEstadoMod","updateMunicipioMod","updateParroquiaMod","updateNombreMod"])),Object(n["d"])("personas",["updateJefeSector"])),{},{confirmacion(){this.$q.dialog({title:"Confirme",message:"¿Seguro que quiere modificar este sector",cancel:!0,persistent:!0}).onOk(()=>{this.guardarSector()})},cargarSector(){this.idJefe=this.sector.jefe?this.sector.jefe:"",this.updateJefeSector(this.sector.jefe?[this.buscarJefe(this.sector.jefe)]:[])},resetear(){this.updateSector(null),this.updateEstadoMod(null),this.updateMunicipioMod(null),this.updateParroquiaMod(null),this.updateNombreMod(""),this.idJefe=null,this.updateJefeSector([])},guardarSector(){var e=this;return S()((function*(){try{const t=new de["a"](e.nombreMod,e.estados[e.estadoMod-1].nombre,e.municipios[e.municipioMod-1].nombre,e.parroquias[e.parroquiaMod-1].nombre,e.sector.nucleos,e.jefeSector[0].id,e.sector.id,e.sector.rev),a=yield L["w"](t);e.idJefe!==e.jefeSector[0].id&&(yield L["f"](a,t)),a&&e.updateModificar()}catch(t){alert("error al modificar el sector 101: "+t)}}))()}}),created(){var e=this;return S()((function*(){e.estadosOpt=e.estados,e.municipiosOpt=e.municipios,e.parroquiasOpt=e.parroquias}))()}},fe=pe,be=a("0378"),qe=a("4b7e"),ve=Object(m["a"])(fe,le,ne,!1,null,"af4d9cf0",null),he=ve.exports;b()(ve,"components",{QDialog:O["a"],QCard:D["a"],QToolbar:T["a"],QToolbarTitle:I["a"],QIcon:E["a"],QBtn:p["a"],QTooltip:$["a"],QCardSection:P["a"],QForm:be["a"],QSeparator:se["a"],QCardActions:qe["a"]}),b()(ve,"directives",{ClosePopup:B["a"]});var ge=a("ee3b"),_e={name:"Sectores",components:{NavSectores:v,DetallesSector:F,TablaSectores:ce,ModificarSector:he,FBA:ge["a"]},methods:{myTweak(e){return{minHeight:e?`calc(100vh - ${e}px`:"100vh"}}}},Se=_e,Ce=a("9989"),ke=Object(m["a"])(Se,o,s,!1,null,"5e1ca231",null);t["default"]=ke.exports;b()(ke,"components",{QPage:Ce["a"]})}}]);