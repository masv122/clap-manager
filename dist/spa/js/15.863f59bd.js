(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{d5fc:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{"style-fn":e.myTweak,padding:""}},[a("div",{staticClass:"shadow-1 bg-white"},[e.$q.screen.lt.sm?e._e():a("NavSectores"),a("ModificarSector"),a("DetallesSector"),a("TablaSectores")],1),a("FBA")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pt-md q-mx-md"},[a("div",{staticClass:"fit row justify-end"},[a("div",{staticClass:"col-auto"},[a("q-btn-group",{attrs:{push:"",rounded:""}},[a("q-btn",{attrs:{color:"positive",push:"",icon:"add",label:"Agregar"},on:{click:e.updateAgregar}}),a("q-btn",{attrs:{color:"info",push:"",icon:"article",label:"Detalles"},on:{click:e.updateDetalles}}),a("q-btn",{attrs:{color:"primary",push:"",icon:"print",label:"Imprimir"}})],1)],1)])])},r=[],c=a("c973"),l=a.n(c),n=a("ded3"),d=a.n(n),u=a("2f62"),p={name:"NavSectores",computed:d()({},Object(u["c"])("sectores",["sector"])),methods:d()(d()({},Object(u["d"])("sectores",["updateAgregar","updateDetalles","updateModificar"])),{},{confirmacion(){var e=this;this.$q.dialog({title:"Confirme",message:"¿Seguro que quiere modificar este sector",cancel:!0,persistent:!0}).onOk(l()((function*(){try{const t=yield e.$db.local.rel.del("sector",e.sector);let a=t.deleted?"Sector eliminado":"No se pudo eliminar el sector",o=t?"check":"close";e.$q.notify({message:a,icon:o})}catch(t){alert(t)}})))}})},m=p,f=a("2877"),b=a("e7a9"),q=a("9c40"),v=a("eebe"),h=a.n(v),g=Object(f["a"])(m,i,r,!1,null,"002067c2",null),C=g.exports;h()(g,"components",{QBtnGroup:b["a"],QBtn:q["a"]});var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:e._detallesSector,callback:function(t){e._detallesSector=t},expression:"_detallesSector"}},[a("q-card",{staticClass:"bg-white text-dark",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-toolbar",{staticClass:"bg-negative text-white q-mb-md",attrs:{dark:""}},[a("q-toolbar-title",{attrs:{shrink:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"article"}}),e._v("Detalles Sector\n          ")],1)]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-dark text-white"}},[e._v("Cerrar")])],1)],1),a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"column"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"info"}}),e._v("Datos del sector\n            ")],1),a("q-field",{attrs:{borderless:"",label:"Nombre","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.sector.nombre))])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Estado","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.sector.estado))])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Municipio","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.sector.municipio))])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Parroquia","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v(e._s(e.sector.parroquia))])]},proxy:!0}])})],1),a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"supervised_user_circle"}}),e._v("Jefe de calle\n            ")],1),a("q-field",{attrs:{borderless:"",label:"Nombre","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Nombre")])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Cedula","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Cedula")])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Codigo","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Codigo")])]},proxy:!0}])})],1),a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 q-ml-xl"},[a("q-icon",{attrs:{name:"supervised_user_circle"}}),e._v("Informacion detallada\n            ")],1),a("q-field",{attrs:{borderless:"",label:"Nucleos registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Nucleos registrados")])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Integrantes registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Integrantes registrados")])]},proxy:!0}])}),a("q-field",{attrs:{borderless:"",label:"Pagos registrados","stack-label":""},scopedSlots:e._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},[e._v("Pagos registrados")])]},proxy:!0}])})],1)])])],1)],1)],1)},S=[],k={name:"DetallesSector",computed:d()(d()({},Object(u["c"])("sectores",["detalles","sector"])),{},{_detallesSector:{get(){return this.detalles},set(e){this.updateDetalles(e)}}}),methods:d()({},Object(u["d"])("sectores",["updateDetalles"]))},w=k,y=a("24e8"),x=a("f09f"),Q=a("65c6"),O=a("6ac5"),N=a("0016"),j=a("05c0"),D=a("a370"),M=a("8572"),T=a("7f67"),E=Object(f["a"])(w,_,S,!1,null,"1b47bc75",null),$=E.exports;h()(E,"components",{QDialog:y["a"],QCard:x["a"],QToolbar:Q["a"],QToolbarTitle:O["a"],QIcon:N["a"],QBtn:q["a"],QTooltip:j["a"],QCardSection:D["a"],QField:M["a"]}),h()(E,"directives",{ClosePopup:T["a"]});var P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{grid:e.$q.screen.xs,"visible-columns":e.visibleColumns,title:"Sectores",data:e.sectores,columns:e.columns,"row-key":"id",filter:e.filter,loading:e.cargandoSectores,"no-data-label":"Sin registro de sectores"},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"negative"}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-select",{staticClass:"q-mr-md",staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":""},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(o){return a("q-th",{key:o.name,attrs:{props:t}},[e._v(e._s(o.label))])})),a("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(o){return a("q-td",{key:o.name,attrs:{props:t}},[e._v(e._s(o.value))])})),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"},on:{click:function(a){return e.updateSector(t.row)}}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateDetalles}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"article",color:"info"}})],1),a("q-item-section",[e._v("Detalles")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.updateModificar}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"edit",color:"amber"}})],1),a("q-item-section",[e._v("Modificar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.confirmacion}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"delete",color:"negative"}})],1),a("q-item-section",[e._v("Eliminar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"print",color:"primary"}})],1),a("q-item-section",[e._v("Imprimir")])],1)],1)],1)],1)],1)],2)]}}])})],1)},L=[],I=a("08e6"),B={name:"TablaSectores",data(){return{filter:"",visibleColumns:["nombre","estado","municipio","parroquia","jefe"],columns:[{name:"nombre",label:"Nombre",field:"nombre"},{name:"estado",label:"Estado",field:"estado"},{name:"municipio",label:"Municipio",field:"municipio"},{name:"parroquia",label:"Parroquia",field:"parroquia"},{name:"jefe",label:"Jefe de Calle",field:"jefe"},{name:"id",label:"Identificador",field:"id"}]}},methods:d()(d()({},Object(u["d"])("sectores",["updateSector","updateAgregar","updateDetalles","updateModificar"])),{},{confirmacion(){var e=this;this.$q.dialog({title:"Confirme",message:"¿Seguro que quiere eliminar este sector",cancel:!0,persistent:!0}).onOk(l()((function*(){try{const t=yield I["i"](e.sector);let a=t.deleted?"Sector eliminado":"No se pudo eliminar el sector",o=t?"check":"close";e.$q.notify({message:a,icon:o})}catch(t){alert(t)}})))}}),computed:d()({},Object(u["c"])("sectores",["sectores","sector","cargandoSectores"]))},A=B,J=a("eaac"),F=a("74f7"),G=a("ddd8"),R=a("27f9"),H=a("bd08"),z=a("357e"),K=a("db86"),U=a("4e73"),V=a("1c1c"),W=a("66e5"),X=a("4074"),Y=Object(f["a"])(A,P,L,!1,null,null,null),Z=Y.exports;h()(Y,"components",{QTable:J["a"],QInnerLoading:F["a"],QSelect:G["a"],QInput:R["a"],QIcon:N["a"],QTr:H["a"],QTh:z["a"],QTd:K["a"],QBtn:q["a"],QMenu:U["a"],QList:V["a"],QItem:W["a"],QItemSection:X["a"]}),h()(Y,"directives",{ClosePopup:T["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},on:{show:e.cargarSector},model:{value:e._modificarSector,callback:function(t){e._modificarSector=t},expression:"_modificarSector"}},[a("q-card",{staticClass:"bg-white text-dark",staticStyle:{width:"700px","max-width":"80vw"}},[a("q-toolbar",{staticClass:"bg-negative text-white q-mb-md",attrs:{dark:""}},[a("q-toolbar-title",{attrs:{shrink:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"edit"}}),e._v("Modificar Sector\n          ")],1)]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-auto",attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-dark text-white"}},[e._v("Cerrar")])],1)],1),a("q-card-section",{staticClass:"q-ma-md"},[a("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"text-h6 q-mt-md"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"info"}}),e._v("Datos del sector\n            "),a("q-btn",{staticClass:"float-right",attrs:{color:"negative",icon:"redo",label:"Restablecer"},on:{click:e.cargarSector}})],1),a("q-separator"),a("DatosBasicosSector",{attrs:{modificar:!0}}),a("div",{staticClass:"text-h6 q-mt-md"},[a("q-icon",{staticClass:"q-mr-md",attrs:{name:"supervised_user_circle"}}),e._v("Reasignar jefe de calle\n            "),a("q-btn",{staticClass:"float-right",attrs:{color:"negative",icon:"redo",label:"Restablecer"}})],1),a("q-separator"),a("TablaJefesDeCalleGrid")],1)],1),a("q-separator"),a("q-card-actions",{staticClass:"q-ma-md",attrs:{align:"center"}},[a("q-btn",{staticClass:"q-ml-sm full-width",attrs:{label:"Guardar",icon:"save",type:"submit",color:"primary"},on:{click:e.confirmacion}})],1)],1)],1)],1)},te=[],ae=(a("c975"),a("cbbd")),oe=a("b5ae"),se=a("29cd"),ie=a("07bd"),re={name:"ModificarSector",components:{TablaJefesDeCalleGrid:se["a"],DatosBasicosSector:ie["a"]},data(){return{model:null,text:"",datos:{estado:null,municipio:null,parroquia:null,nombre:""},id:""}},watch:{datos:{immediate:!0,deep:!0,handler(e,t){e.estado&&(e.estado!==t.estado&&(this.datos.municipio=null),this.municipiosOpt=this.municipiosEnEstado(e.estado)),e.municipio&&(e.municipio!==t.municipio&&(this.datos.parroquia=null),this.parroquiasOpt=this.parroquiasEnMunicipio(e.municipio))}}},validations:{datos:{estado:{required:oe["required"]},municipio:{required:oe["required"]},parroquia:{required:oe["required"]},nombre:{required:oe["required"]}}},computed:d()(d()(d()(d()({},Object(u["c"])("sectores",["modificar","sector"])),Object(u["c"])("personas",["jefeSector"])),Object(u["c"])("global",["estados","municipios","municipiosEnEstado","parroquias","parroquiasEnMunicipio","estadoPorNombre","municipioPorNombre","parroquiasPorNombre"])),{},{_modificarSector:{get(){return this.modificar},set(){this.updateModificar()}}}),methods:d()(d()(d()({},Object(u["d"])("sectores",["updateModificar"])),Object(u["b"])("sectores",["modificarSector"])),{},{filterEstados(e,t,a){t(()=>{const t=e.toLocaleLowerCase();this.estadosOpt=this.estados.filter(e=>e.nombre.toLocaleLowerCase().indexOf(t)>-1)})},filterMunicipio(e,t,a){const o=this.datos.estado?this.municipiosEnEstado(this.datos.estado):this.municipios;t(()=>{const t=e.toLocaleLowerCase();this.municipiosOpt=o.filter(e=>e.nombre.toLocaleLowerCase().indexOf(t)>-1)})},filterParroquia(e,t,a){const o=this.datos.municipio?this.parroquiasEnMunicipio(this.datos.municipio):this.parroquias;t(()=>{const t=e.toLocaleLowerCase();this.parroquiasOpt=o.filter(e=>e.nombre.toLocaleLowerCase().indexOf(t)>-1)})},confirmacion(){this.$q.dialog({title:"Confirme",message:"¿Seguro que quiere modificar este sector",cancel:!0,persistent:!0}).onOk(()=>{this.guardarSector()})},cargarSector(){this.datos.nombre=this.sector.nombre,this.datos.estado=this.estadoPorNombre(this.sector.estado),this.datos.municipio=this.municipioPorNombre(this.sector.municipio),this.datos.parroquia=this.parroquiasPorNombre(this.sector.parroquia)},guardarSector(){var e=this;return l()((function*(){try{const t=new ae["a"](e.datos.nombre,e.estados[e.datos.estado.id-1].nombre,e.municipios[e.datos.municipio.id-1].nombre,e.parroquias[e.datos.parroquia.id-1].nombre,e.sector.nucleos,e.sector.jefe,e.sector.id,e.sector.rev),a=yield I["f"](t);let o=a?"Sector Modificado":"No se pudo modificar el sector",s=a?"check":"close";e.$q.notify({message:o,icon:s}),a&&e.updateModificar()}catch(t){alert(t)}}))()}}),created(){var e=this;return l()((function*(){e.estadosOpt=e.estados,e.municipiosOpt=e.municipios,e.parroquiasOpt=e.parroquias}))()}},ce=re,le=a("0378"),ne=a("eb85"),de=a("4b7e"),ue=Object(f["a"])(ce,ee,te,!1,null,"17fca830",null),pe=ue.exports;h()(ue,"components",{QDialog:y["a"],QCard:x["a"],QToolbar:Q["a"],QToolbarTitle:O["a"],QIcon:N["a"],QBtn:q["a"],QTooltip:j["a"],QCardSection:D["a"],QForm:le["a"],QSeparator:ne["a"],QCardActions:de["a"]}),h()(ue,"directives",{ClosePopup:T["a"]});var me=a("ee3b"),fe={name:"Sectores",components:{NavSectores:C,DetallesSector:$,TablaSectores:Z,ModificarSector:pe,FBA:me["a"]},methods:{myTweak(e){return{minHeight:e?`calc(100vh - ${e}px`:"100vh"}}}},be=fe,qe=a("9989"),ve=Object(f["a"])(be,o,s,!1,null,"1d6488da",null);t["default"]=ve.exports;h()(ve,"components",{QPage:qe["a"]})}}]);